<!DOCTYPE html>
<html>
  <head>
    <style>
      /* CSS for table styling */
      table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 100%;
      }
      td, th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
      }
      th {
        background-color: #dddddd;
      }
    </style>
  </head>
  <body>
    <div>
      <input type="text" id="searchInput" placeholder="Search..." onkeyup="search()">
    </div>
    <table id="transactionsTable">
      <tr>
        <th>Date</th>
        <th>Amount</th>
        <th>Reference</th>
        <th>Type</th>
        <th>Name</th>
        <th>Actions</th>
      </tr>
      <tbody id="transactionsBody">
        <!-- Data from local storage will be inserted here -->
      </tbody>
    </table>

<script>
  window.onload = function() {
    let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
    displayTransactions(transactions);
  }
  
  // Function to display data in table
  function displayTransactions(transactions) {
    let transactionsBody = document.getElementById("transactionsBody");
    transactionsBody.innerHTML = "";
    for (let i = 0; i < transactions.length; i++) {
      let transaction = transactions[i];
      let row = document.createElement("tr");
      let dateCell = document.createElement("td");
      dateCell.innerHTML = transaction.date;
      let amountCell = document.createElement("td");
      amountCell.innerHTML = transaction.amount;
      let referenceCell = document.createElement("td");
      referenceCell.innerHTML = transaction.reference;
      let typeCell = document.createElement("td");
      typeCell.innerHTML = transaction.type;
      let nameCell = document.createElement("td");
      nameCell.innerHTML = transaction.name;
      let actionsCell = document.createElement("td");
      let editButton = document.createElement("button");
      editButton.innerHTML = "Edit";
      editButton.onclick = function() {
        // Get the index of the transaction to be edited
        let index = transactions.indexOf(transaction);

        // Create a dropdown menu for selecting the field to edit
 
        var options = ["Date", "Amount", "Reference","Type","Name"];
        var select = document.createElement("select");

        for (var i = 0; i < options.length; i++) {
            var option = document.createElement("option");
            option.value = options[i];
            option.text = options[i];
            select.appendChild(option);
        }
        select.id = "select";
        select.onchange = function(){
            let selectedOption = this.options[this.selectedIndex].text;
            let newValue = prompt("Enter the new " + selectedOption);
            if(selectedOption === "Date"){
                transactions[index].date = newValue;
            }else if(selectedOption === "Amount"){
                transactions[index].amount = newValue;
            }else if(selectedOption === "Reference"){
                transactions[index].reference = newValue;
            }else if(selectedOption === "Type"){
                transactions[index].type = newValue;
            }else if(selectedOption === "Name"){
                transactions[index].name = newValue;
            }
            localStorage.setItem("transactions", JSON.stringify(transactions));
            displayTransactions(transactions);
        }
        actionsCell.appendChild(select);

        row.appendChild(dateCell);
        row.appendChild(amountCell);
        row.appendChild(referenceCell);
        row.appendChild(typeCell);
        row.appendChild(nameCell);
        row.appendChild(actionsCell);

        transactionsBody.appendChild(row);
    }
}
function search() {
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("searchInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("transactionsTable");
    tr = table.getElementsByTagName("tr");
    for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[0];
        if (td) {
            txtValue = td.textContent || td.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = "";
            } else {
                tr[i].style.display = "none";
            }
        }
    }
}

</script>
</body>
</html>
