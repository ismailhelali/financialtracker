 <!DOCTYPE html>
<html>
<head>
 <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  <title>Financial Tracker Dashboard</title>
  <style>
   
#dashboard {
  display: flex;
  flex-wrap: wrap;
}
#filters {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-evenly;
}
#kpis {
  width: 100%;
  display: flex;
  justify-content: space-evenly;
}
#kpis div {
  width: 20%;
  text-align: center;
}
#charts {
  width: 100%;
  display: flex;
  justify-content: space-evenly;
}
#charts canvas {
  width: 48%;
}
  </style>
</head>
<body>
<div id="dashboard">
  <div id="filters">
    <label for="start-date">Start Date:</label>
    <input type="date" id="start-date">
    <label for="end-date">End Date:</label>
    <input type="date" id="end-date">
    <button id="filter-button">Filter</button>
  </div>
  <div id="kpis">
    <div id="current-balance"></div>
    <div id="income"></div>
    <div id="expenses"></div>
    <div id="net-income"></div>
  </div>
  <div id="charts">
    <canvas id="balance-chart"></canvas>
    <canvas id="spending-chart"></canvas>
  </div>
</div>

<script>
// Get transactions from local storage
let transactions = JSON.parse(localStorage.getItem("transactions")) || [];

// Filter transactions based on start and end date
let startDate = new Date();
let endDate = new Date();
document.getElementById("start-date").valueAsDate = startDate;
document.getElementById("end-date").valueAsDate = endDate;
document.getElementById("filter-button").addEventListener("click", function() {
  startDate = new Date(document.getElementById("start-date").value);
  endDate = new Date(document.getElementById("end-date").value);
  filterAndUpdate();
});

function filterAndUpdate() {
  // Filter transactions based on start and end date
  transactions = transactions.filter(transaction => {
    let date = new Date(transaction.date);
    return date >= startDate && date <= endDate;
  });

  // Group transactions by category
  let categories = {};
  transactions.forEach(transaction => {
    let category = transaction.category || "Other";
    if (!categories[category]) {
      categories[category] = 0;
    }
    categories[category] += transaction.amount;
  });

  // Calculate current balance, income, expenses, and net income
  let currentBalance = 0;
  let income = 0;
  let expenses = 0;
  transactions.forEach(transaction => {
    currentBalance += transaction.amount;
    if (transaction.amount > 0) {
      income += transaction.amount;
    } else {
      expenses -= transaction.amount;
    }
  });
  let netIncome = income - expenses;

  // Display KPI values
  document.getElementById("current-balance").innerHTML = `Current Balance: ${currentBalance}`;
  document.getElementById("income").innerHTML = `Income: ${income}`;
  document.getElementById("expenses").innerHTML = `Expenses: ${expenses}`;
  document.getElementById("net-income").innerHTML = `Net Income: ${netIncome}`;

  // Create balance chart
  let balanceData = transactions.map(transaction => {
    return { x: new Date(transaction.date), y: currentBalance };
  });
  let balanceChart = new Chart(document.getElementById("balance-chart"), {
    type: "line",
    data: {
      datasets: [{
        label: "Current Balance",
        data: balanceData,
        backgroundColor: "rgba(0, 0, 255, 0.2)",
        borderColor: "rgba(0, 0, 255, 1)",
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        x: {
          type: "time",
          distribution: "series",
          time: {
            unit: "month"
          }
        },
        y: {
          beginAtZero: true
        }
      }
    }
  });

  // Create spending chart
  let spendingData = Object.keys(categories).map(category => {
    return { label: category, value: categories[category] };
  });
  let spendingChart = new Chart(document.getElementById("spending-chart"), {
    type: "pie",
    data: {
      datasets: [{
        data: spendingData,
        backgroundColor: [
          "rgba(255, 0, 0, 0.2)",
          "rgba(0, 255, 0, 0.2)",
          "rgba(0, 0, 255, 0.2)",
          "rgba(255, 255, 0, 0.2)",
          "rgba(0, 255, 255, 0.2)",
          "rgba(255, 0, 255, 0.2)"
        ],
        borderColor: [
          "rgba(255, 0, 0, 1)",
          "rgba(0, 255, 0, 1)",
          "rgba(0, 0, 255, 1)",
          "rgba(255, 255, 0, 1)",
          "rgba(0, 255, 255, 1)",
          "rgba(255, 0, 255, 1)"
        ],
        borderWidth: 1
      }],
      labels: spendingData.map(data => data.label)
    },
    options: {
      responsive: true,
      legend: {
        position: 'top',
      },
      title: {
        display: true,
        text: 'Spending by Category'
      },
      animation: {
        animateScale: true,
        animateRotate: true
      }
    }
  });
}

// Initial load
filterAndUpdate();
</script>

</body>
</html>
